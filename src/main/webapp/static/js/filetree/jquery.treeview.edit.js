(function(f){var e=f.treeview.classes;var d=f.fn.treeview;f.fn.treeview=function(a){a=f.extend({},a);if(a.add){return this.trigger("add",[a.add])}if(a.remove){return this.trigger("remove",[a.remove])}return d.apply(this,arguments).bind("add",function(c,b){f(b).prev().removeClass(e.last).removeClass(e.lastCollapsable).removeClass(e.lastExpandable).find(">.hitarea").removeClass(e.lastCollapsableHitarea).removeClass(e.lastExpandableHitarea);f(b).find("li").andSelf().prepareBranches(a).applyClasses(a,f(this).data("toggler"))}).bind("remove",function(j,i){var b=f(i).prev();var c=f(i).parent();f(i).remove();b.filter(":last-child").addClass(e.last).filter("."+e.expandable).replaceClass(e.last,e.lastExpandable).end().find(">.hitarea").replaceClass(e.expandableHitarea,e.lastExpandableHitarea).end().filter("."+e.collapsable).replaceClass(e.last,e.lastCollapsable).end().find(">.hitarea").replaceClass(e.collapsableHitarea,e.lastCollapsableHitarea);if(c.is(":not(:has(>))")&&c[0]!=this){c.parent().removeClass(e.collapsable).removeClass(e.expandable);c.siblings(".hitarea").andSelf().remove()}})}})(jQuery);